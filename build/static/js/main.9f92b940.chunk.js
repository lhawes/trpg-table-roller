(this["webpackJsonptrpg-table-roller"]=this["webpackJsonptrpg-table-roller"]||[]).push([[0],{12:function(e,t,n){e.exports=n(22)},17:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var r,a=n(1),o=n.n(a),c=n(9),l=n.n(c),i=(n(17),n(11)),u=n(0),b=Object(u.a)({maxWidth:"1200px",margin:"0 auto",display:"flex",flexDirection:"column"}),s=function(e){var t=e.children,n=e.style,r=Object(a.useMemo)((function(){return Object(u.a)(b,n)}),[n]);return Object(u.b)("div",{css:r},t)},d=Object(u.a)({backgroundColor:"black"}),O=Object(u.a)({backgroundColor:"black",color:"white",padding:"8px"}),f=Object(u.a)({fontWeight:"bold"}),p=function(){return Object(u.b)("div",{css:d},Object(u.b)(s,null,Object(u.b)("header",{css:O},Object(u.b)("span",{css:f},"TRPG table roller"),": A tool to create multi table rollers")))};!function(e){e.CHANGE_TEXT_TEMPLATE="@generator/CHANGE_TEXT_TEMPLATE",e.CHANGE_GENERATOR_NAME="@generator/CHANGE_GENERATOR_NAME",e.ADD_TABLE="@generator/ADD_TABLE",e.REMOVE_TABLE="@generator/REMOVE_TABLE",e.CHANGE_TABLE_NAME="@table/CHANGE_TABLE_NAME",e.ADD_TABLE_ENTRY="@table/ADD_TABLE_ENTRY",e.REMOVE_TABLE_ENTRY="@table/REMOVE_TABLE_ENTRY",e.CHANGE_TABLE_ENTRY="@table/CHANGE_TABLE_ENTRY",e.UPDATE_STATE_FROM_FILE="@app/UPDATE_STATE_FROM_FILE",e.ADD_TO_HISTORY="@history/ADD_TO_HISTORY",e.CLEAR_HISTORY="@history/CLEAR_HISTORY"}(r||(r={}));var g=function(e,t){return{type:r.ADD_TABLE_ENTRY,payload:{tableIndex:t,tableEntry:e}}},E=function(e){return{type:r.UPDATE_STATE_FROM_FILE,payload:{fileState:e}}},j={primary:"#FECCCB",secondary:"#EF616C",blue:"#0090B5",light:"#FFF6F6",dark:"#2F2C23"},m=Object(u.a)({border:"none",backgroundColor:j.blue,color:"white",width:"auto",padding:"8px",margin:"16px 0"}),v=function(e){var t=e.style,n=e.children,r=e.onClick,o=Object(a.useMemo)((function(){return Object(u.a)(m,t)}),[t]);return Object(u.b)("button",{css:o,onClick:r},n)},y=function(){var e=Object(a.useContext)(Ue),t=Object(a.useCallback)((function(){return e({type:r.CLEAR_HISTORY})}),[e]);return o.a.createElement(v,{onClick:t},"Clear Roll History")},h=n(7),C={generatorName:"",textTemplate:"",tables:[{name:"",entries:[""]}],operations:[],history:[],version:1},T=function(e){return e.generator},x=function(e){return T(e).generatorName},A=function(e){return T(e).tables},_=function(e){return T(e).textTemplate},R=n(10),k=!1;try{k=!!new Blob}catch(Ze){console.error(Ze)}var w=Object(u.a)({border:"none",backgroundColor:j.secondary,color:"white",width:"auto",padding:"8px",margin:"16px 0"}),N=function(e){var t=e.style,n=e.children,r=e.onClick,o=Object(a.useMemo)((function(){return Object(u.a)(w,t)}),[t]);return Object(u.b)("button",{css:o,onClick:r},n)},L=function(){var e=Object(a.useContext)(ze),t=x(e),n=Object(a.useCallback)((function(){!function(e,t){if(!k)throw new Error("cannot save file");var n=new Blob(e,{type:"text/plain;charset=utf-8"});Object(R.saveAs)(n,t)}(function(e){return[JSON.stringify(e,null,2)]}(e),"".concat(t,"-tables"))}),[e]);return o.a.createElement(N,{onClick:n},"Export Table")},I=function(e){return JSON.parse(e)},S=function(e){var t=new FileReader;return new Promise((function(n,r){t.onload=function(e){var t;return n(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.result)},t.onerror=function(e){return r(e)},t.readAsText(e)}))},D=Object(u.a)({margin:"16px"}),M=function(){var e,t=Object(a.useContext)(Ue),n=Object(a.useCallback)((function(e){return t(E(e))}),[]),r=Object(a.useCallback)((e=n,function(t){var n=t.target;"files"in n&&(n.files||[]).length>0&&S((n.files||[])[0]).then((function(t){return e(I(t))})).catch((function(e){return console.log(e)}))}),[n]);return Object(u.b)("input",{id:"upload",css:D,type:"file",onChange:r})},B=function(e){var t=e.value,n=void 0===t?"":t,r=e.style,a=e.onChange,o=e.placeHolder,c=void 0===o?"":o,l=e.onKeyDown,i=e.tabIndex;return Object(u.b)("input",{tabIndex:i,onKeyDown:l,value:n,css:r,onChange:a,placeholder:c})},H=Object(u.a)({borderBottom:"1px solid black",height:"24px",padding:"0 0 0 ".concat("20px")}),G=Object(u.a)({border:"none",outline:"none","&:hover,&:focus":H,height:"24px",padding:"0 0 1px ".concat("20px")}),F=function(e){var t=e.value,n=e.style,r=e.onChange,o=e.placeHolder,c=e.onKeyDown,l=(e.tabIndex,Object(a.useMemo)((function(){return Object(u.a)(G,n)}),[n]));return Object(u.b)(B,{onKeyDown:c,value:t,style:l,onChange:r,placeHolder:o})},Y=function(e){var t=e.style,n=Object(a.useContext)(ze),c=Object(a.useContext)(Ue),l=x(n),i=Object(a.useCallback)((function(e){var t=e.target.value;c(function(e){return{type:r.CHANGE_GENERATOR_NAME,payload:{generatorName:e}}}(t))}),[c]);return o.a.createElement(F,{value:l,style:t,onChange:i,placeHolder:"Table Generator name"})},P=Object(u.a)({display:"block",margin:"8px",fontStyle:"italic"}),V=function(){var e=function(e){return T(e).history}(Object(a.useContext)(ze));return Object(u.b)("div",null,e.map((function(e,t){return Object(u.b)("span",{css:P,key:t},e)})).reverse())},K=n(2),J=Object(K.a)({},"generator",{generatorName:"Potion Maker",textTemplate:"A {{1}} that {{2}} {{3}}. If ingested it will {{4}}, but will also {{5}} and {{5}}.",tables:[{name:"Bottle Type",entries:["clear glass bottle","square green container","topped drinking horn","old corked wine bottle","clay jug with an old cork","small vial","ceramic Elven vase"]},{name:"Smell",entries:["smells putrid","stings your nose when opened","smells like flowers","has an acrid smell permeating the container","smells like dung"]},{name:"Look",entries:["and looks worse than it smells"," with a green liquid magically bubbling","but is clear"]},{name:"Positive Effect",entries:["make the drinker immune to fire","give the consumer the ability to breath water","mend the bones of the consumer","expels poisons and venom from the body","induces a hypnotic trance","causes hardened plates to grow over the skin","randomly changes the drinker's appearance","enhances the drinker's vision","makes a random sense sensitive to magic fields","heals minor cuts and bruises","reduce the gravity affecting the drinker"]},{name:"Negative Effect",entries:["turn the the drinker's skin strange colors","cause immense strain on the body","make the consumer break out in hives","make the user sensitive to loud noises","severely reduce the drinker's coordination","make the drinker temporarily blind","magically fix the drinker on the spot"]}],operations:[],history:["A ceramic Elven vase that smells like dung and looks worse than it smells. If ingested it will reduce the gravity affecting the drinker, but will also make the consumer break out in hives."],version:1}),W=function(){var e=Object(a.useContext)(Ue),t=Object(a.useCallback)((function(){e(E(J))}),[]);return o.a.createElement(v,{onClick:t},"Load Example Data")},X=function(e){return"{{".concat(e,"}}")},z=function(e){return"\\{\\{".concat(e,"\\}\\}")},U=function(e){var t,n;return e[(t=0,n=e.length,Math.floor(Math.random()*(n-t)+t))]},q=function(e,t){var n=A(e)[t].entries;return U(n)},Q=function(e){return A(e).map((function(t,n){return q(e,n)}))},Z=function(e){return e.reduce((function(e,t){return"".concat(e," ").concat(t)}),"")},$=function(e){var t=Q(e),n=_(e);if(n){var r=new RegExp("(".concat(z("\\d"),")"),"");return n.split(r).map((function(t){if(t.match(r)){var n=function(e){var t=new RegExp("[".concat(z(""),"]"),"g"),n=e.replace(t,"");return parseInt(n,10)-1}(t),a=q(e,n);return console.log({result:a}),a}return t})).join("")}return Z(t)},ee=function(){var e=Object(a.useContext)(ze),t=Object(a.useContext)(Ue),n=Object(a.useCallback)((function(){return t((n=$(e),{type:r.ADD_TO_HISTORY,payload:{tableRollResult:n}}));var n}),[e]);return o.a.createElement(N,{onClick:n},"Roll on Table")},te=n(5);function ne(){var e=Object(te.a)(["\n      ","\n      ","\n    "]);return ne=function(){return e},e}var re=Object(u.a)([{display:"grid"}]),ae=function(e){var t=e.children,n=e.layout,r=Object(a.useMemo)((function(){return Object(u.a)(ne(),re,n)}),[n]);return Object(u.b)("section",{css:r},t)};function oe(){var e=Object(te.a)(["\n      ","\n      ","\n    "]);return oe=function(){return e},e}var ce=Object(u.a)([{display:"grid"}]),le=function(e){var t=e.children,n=e.layout,r=Object(a.useMemo)((function(){return Object(u.a)(oe(),ce,n)}),[n]);return Object(u.b)("div",{css:r},t)},ie=function(e){var t=e.table,n=e.tableIndex,o=e.render,c=Object(a.useContext)(Ue),l=t.name,i=t.entries,u=Object(a.useCallback)((function(e){var t=e.target.value;return c(function(e,t){return{type:r.CHANGE_TABLE_NAME,payload:{tableName:e,tableIndex:t}}}(t,n))}),[n,c]),b=Object(a.useCallback)((function(e){return function(t){var a=t.target.value;return c(function(e,t,n){return{type:r.CHANGE_TABLE_ENTRY,payload:{tableEntry:e,tableIndex:t,tableEntryIndex:n}}}(a,n,e))}}),[n,c]),s=Object(a.useCallback)((function(e){return function(t){return c(function(e,t){return{type:r.REMOVE_TABLE_ENTRY,payload:{tableIndex:e,tableEntryIndex:t}}}(n,e))}}),[n,c]),d=Object(a.useCallback)((function(){return c(g("",n))}),[n,c]),O=Object(a.useCallback)((function(e){if("Enter"===e.key)return c(g("",n))}),[n,c]);return o({tableName:l,updateTableName:u,tableEntries:i.map((function(e,t){return{value:e,changeEntry:b(t),entryIndex:t,removeEntry:s(t)}})),addTableEntry:d,handleLastEntryEnterKey:O})},ue=Object(u.a)({gridTemplateColumns:"16fr 1fr 1fr",gridTemplateRows:"auto",margin:"18px 0 0 0"}),be=Object(u.a)({gridColumnStart:2,gridColumnEnd:3,gridRow:1,justifySelf:"center",fontWeight:"bold"}),se=Object(u.a)({gridColumnStart:1,gridColumnEnd:2,gridRow:1,fontSize:"18px",padding:"0 0 3px 0","&:hover,&:focus":{padding:"0 0 2px 0"},fontWeight:"bold"}),de=Object(u.a)({gridColumnStart:3,gridColumnEnd:4,gridRow:1,color:"#757575",justifySelf:"center"}),Oe=function(e){var t=e.tableName,n=e.updateTableName,r=e.tableLength,o=e.tableIndex,c=Object(a.useMemo)((function(){return X(o+1)}),[o]);return Object(u.b)(le,{layout:ue},Object(u.b)(F,{value:t,style:se,onChange:n,placeHolder:"Table name"}),Object(u.b)("div",{css:be},"d".concat(r)),Object(u.b)("div",{css:de},c))},fe=Object(u.a)({gridTemplateColumns:"1fr ".concat("24px"),gridTemplateRows:"1fr"}),pe=Object(u.a)({gridColumnStart:1,gridColumnEnd:3,gridRow:1}),ge=Object(u.a)({gridColumnStart:1,gridColumnEnd:3}),Ee=Object(u.a)({float:"right"}),je=Object(u.a)({border:"none",outline:"none",appearance:"none",backgroundColor:"transparent","&:hover,&:focus":{},padding:"0 0 1px 0"}),me=Object(u.a)({backgroundColor:j.primary}),ve=function(e){var t=e.table,n=e.tableIndex,o=Object(a.useContext)(Ue),c=Object(a.useCallback)((function(){return o(function(e){return{type:r.REMOVE_TABLE,payload:{tableIndex:e}}}(n))}),[n]);return Object(u.b)(ie,{table:t,tableIndex:n,render:function(e){var r=e.tableName,a=e.updateTableName,o=e.tableEntries,l=e.addTableEntry,i=e.handleLastEntryEnterKey;return Object(u.b)(le,{layout:fe},Object(u.b)("div",{css:pe},Object(u.b)(Oe,{tableName:r,updateTableName:a,tableLength:t.entries.length,tableIndex:n})),o.map((function(e){var t,n=e.value,r=e.changeEntry,a=e.entryIndex,c=e.removeEntry,l=a%2?me:void 0;return a+1===o.length&&(t=i),[Object(u.b)(F,{tabIndex:a,onKeyDown:t,style:l,value:n,onChange:r,key:"table-entry-".concat(a),placeHolder:"Entry text"}),Object(u.b)("button",{css:Object(u.a)(je,l),onClick:c,key:"close-table-entry-".concat(a)},"X")]})),Object(u.b)("div",{css:ge},Object(u.b)(N,{onClick:l},"Add Table Entry"),Object(u.b)(v,{style:Ee,onClick:c},"Remove Table")))}})},ye=function(){var e=Object(a.useContext)(ze),t=A(e)||[];return o.a.createElement(o.a.Fragment,null,t.map((function(e,t){return o.a.createElement(ve,{table:e,tableIndex:t,key:"table".concat(t)})})))},he=Object(u.a)({margin:"0 auto"}),Ce=function(){var e=Object(a.useContext)(Ue),t=Object(a.useCallback)((function(){return e((t={name:"",entries:[""]},{type:r.ADD_TABLE,payload:t}));var t}),[]);return Object(u.b)(le,null,Object(u.b)(ye,null),Object(u.b)("div",{css:he},Object(u.b)(N,{onClick:t},"Add Table")))},Te=function(e){var t=e.style,n=Object(a.useContext)(ze),c=Object(a.useContext)(Ue),l=_(n),i=Object(a.useCallback)((function(e){var t=e.target.value;c(function(e){return{type:r.CHANGE_TEXT_TEMPLATE,payload:{textTemplate:e}}}(t))}),[c]);return o.a.createElement(F,{value:l,style:t,onChange:i,placeHolder:"Text template, use {{1}} to insert result"})},xe=Object(u.a)({width:"100%"}),Ae=Object(u.a)({width:"calc(100% - 20px)",marginBottom:"2px"}),_e=Object(u.a)({height:"55px",overflow:"scroll"}),Re=Object(u.a)({fontSize:"18px",margin:"16px 0"}),ke=function(e){var t=e.style,n=function(e){var t=A(e),n=_(e);return t.reduce((function(e,t,n){var r=X(n+1);if(e.includes(r)){var a=new RegExp("".concat(z(n+1)),"g");return e.replace(a,X(t.name))}return e}),n)}(Object(a.useContext)(ze)),r=Object(a.useMemo)((function(){return Object(u.a)(t,xe)}),[t]);return Object(u.b)("div",{css:r},Object(u.b)("div",{css:Re},"Roll result template"),Object(u.b)(Te,{style:Ae}),Object(u.b)("div",{css:_e},"preview: ",n))},we=Object(u.a)({gridColumn:1,gridRow:1}),Ne=Object(u.a)({gridColumn:1,gridRow:2}),Le=Object(u.a)({gridColumnStart:1,gridColumnEnd:4,gridRow:1}),Ie=Object(u.a)({gridColumnStart:1,gridColumnEnd:3,gridRow:2}),Se=Object(u.a)({gridColumnStart:2,gridColumnEnd:4,gridRow:2,fontSize:"18px",margin:"16px 0"}),De=Object(u.a)({gridColumnStart:1,gridColumnEnd:4,gridRow:3}),Me=Object(u.a)({gridColumn:1,gridRow:4}),Be=Object(u.a)({gridColumn:2,gridRow:4,justifySelf:"middle"}),He=Object(u.a)({gridColumn:3,gridRow:4,justifySelf:"end"}),Ge=Object(u.a)({gridColumn:1,gridRow:5}),Fe=Object(u.a)({gridTemplateColumns:"1fr 1fr",gridTemplateRows:"auto",columnGap:"12px"}),Ye=Object(u.a)({gridTemplateColumns:"1fr",gridTemplateRows:"65px auto"}),Pe=Object(u.a)({gridTemplateColumns:"1fr 1fr 1fr ",gridTemplateRows:"auto auto 1fr auto"}),Ve=Object(u.a)({width:"100%",fontSize:"30px",padding:"0 0 5px 0",margin:"36px 0 0 0","&:hover,&:focus":{padding:"0 0 4px 0"},fontWeight:"bold"}),Ke=function(){return Object(u.b)(s,null,Object(u.b)(ae,{layout:Fe},Object(u.b)(le,{layout:Ye},Object(u.b)("div",{css:we},Object(u.b)(Y,{style:Ve})),Object(u.b)("div",{css:Ne},Object(u.b)(Ce,null))),Object(u.b)(le,{layout:Pe},Object(u.b)(ke,{style:Le}),Object(u.b)("div",{css:Ie},Object(u.b)(ee,null)),Object(u.b)("div",{css:Se},"Table Roll Results:"),Object(u.b)("div",{css:De},Object(u.b)(V,null)),Object(u.b)("div",{css:Me},Object(u.b)(L,null)),Object(u.b)("div",{css:Be},Object(u.b)(M,null)),Object(u.b)("div",{css:He},Object(u.b)(y,null)),Object(u.b)("div",{css:Ge},Object(u.b)(W,null)))))},Je=Object(K.a)({},"generator",C);var We,Xe=(We=Object(K.a)({},"generator",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,n=JSON.parse(JSON.stringify(e));switch(t.type){case r.UPDATE_STATE_FROM_FILE:var a=t.payload.fileState;return T(a);case r.CHANGE_TEXT_TEMPLATE:var o=t.payload.textTemplate;return n.textTemplate=o,n;case r.CHANGE_GENERATOR_NAME:var c=t.payload.generatorName;return n.generatorName=c,n;case r.ADD_TABLE:var l=t.payload;return n.tables.push(l),n;case r.REMOVE_TABLE:var i=t.payload.tableIndex;return n.tables=Object(h.a)(n.tables.filter((function(e,t){return t!==i}))),n;case r.CHANGE_TABLE_NAME:var u=t.payload,b=u.tableName,s=u.tableIndex;return n.tables[s].name=b,n;case r.ADD_TABLE_ENTRY:var d=t.payload,O=d.tableIndex,f=d.tableEntry;return n.tables[O].entries.push(f),n;case r.REMOVE_TABLE_ENTRY:var p=t.payload,g=p.tableIndex,E=p.tableEntryIndex;return n.tables[g].entries=Object(h.a)(n.tables[g].entries.filter((function(e,t){return t!==E}))),n;case r.CHANGE_TABLE_ENTRY:var j=t.payload,m=j.tableEntry,v=j.tableIndex,y=j.tableEntryIndex;return n.tables[v].entries[y]=m,n;case r.ADD_TO_HISTORY:var x=t.payload.tableRollResult;return n.history.push(x),n;case r.CLEAR_HISTORY:return n.history=[],n;default:return n}})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0,n={};return Object.keys(We).forEach((function(r){n[r]=We[r](e[r],t)})),n}),ze=o.a.createContext(Je),Ue=o.a.createContext((function(e){throw new Error("Context consumer provided with default dispatch "+e.type)})),qe=function(){var e=Object(a.useReducer)(Xe,Je),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(u.b)(Ue.Provider,{value:r},Object(u.b)(ze.Provider,{value:n},Object(u.b)(p,null),Object(u.b)(Ke,null)))},Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(qe,null)),document.getElementById("root")),Qe()}},[[12,1,2]]]);
//# sourceMappingURL=main.9f92b940.chunk.js.map